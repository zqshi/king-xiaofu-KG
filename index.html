<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IM风格智能助手</title>
    <!-- Tailwind CSS v3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 统一的 Tailwind 配置 -->
    <!-- 统一的 Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1677FF', // 调整为更专业的蓝色
                        secondary: '#0969DA',
                        success: '#10B981',
                        warning: '#F59E0B',
                        error: '#EF4444',
                        'bg-light': '#F9FAFB', // 更柔和的背景色
                        'bg-dark': '#1F2937',
                        'text-primary': '#111827', // 更深的主文本色
                        'text-secondary': '#6B7280', // 更柔和的次要文本色
                        'border-light': '#E5E7EB',
                        'border-dark': '#374151',
                    },
                    fontFamily: {
                        sans: ['Inter', 'SF Pro Display', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'card': '0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06)',
                        'dropdown': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                        'elevated': '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
                    },
                    spacing: {
                        '88': '22rem',
                    },
                    transitionProperty: {
                        'height': 'height',
                        'spacing': 'margin, padding',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .scrollbar-thin::-webkit-scrollbar {
                width: 4px;
                height: 4px;
            }
            .scrollbar-thin::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            .scrollbar-thin::-webkit-scrollbar-thumb {
                background: #c1c1c1;
                border-radius: 2px;
            }
            .scrollbar-thin::-webkit-scrollbar-thumb:hover {
                background: #a1a1a1;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .message-bubble-user {
                @apply bg-primary text-white rounded-t-lg rounded-bl-lg rounded-tr-lg shadow-sm transition-all duration-200 hover:shadow-md;
            }
            .message-bubble-system {
                @apply bg-white text-text-primary rounded-t-lg rounded-br-lg rounded-tl-lg border border-border-light shadow-sm transition-all duration-200 hover:shadow-md;
            }
            .message-bubble-admin {
                @apply bg-blue-50 text-primary rounded-t-lg rounded-br-lg rounded-tl-lg border border-blue-100 shadow-sm transition-all duration-200 hover:shadow-md;
            }
            .btn-primary {
                @apply bg-primary text-white px-4 py-2 rounded-lg hover:bg-secondary transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 active:bg-secondary;
            }
            .btn-secondary {
                @apply bg-white text-text-primary px-4 py-2 rounded-lg border border-border-light hover:bg-gray-50 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50;
            }
            .input-primary {
                @apply w-full px-4 py-2 rounded-lg border border-border-light focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200;
            }
            .card-hover {
                @apply transition-all duration-200 hover:shadow-md hover:-translate-y-0.5;
            }
            .slide-in {
                animation: slideIn 0.3s ease forwards;
            }
            .slide-out {
                animation: slideOut 0.3s ease forwards;
            }
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            
            /* 上传区域滑入滑出动画 */
            .animate-slide-down {
                animation: slideDown 0.3s ease forwards;
            }
            .animate-slide-up {
                animation: slideUp 0.3s ease forwards;
            }
            @keyframes slideDown {
                from { transform: translateY(0); opacity: 1; }
                to { transform: translateY(20px); opacity: 0; }
            }
            @keyframes slideUp {
                from { transform: translateY(20px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
            .fade-in {
                animation: fadeIn 0.3s ease forwards;
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            .pulse {
                animation: pulse 1.5s infinite;
            }
            @keyframes pulse {
                0% { transform: scale(0.95); opacity: 0.7; }
                50% { transform: scale(1); opacity: 1; }
                100% { transform: scale(0.95); opacity: 0.7; }
            }
            .typing-indicator {
                display: inline-flex;
                align-items: center;
            }
            .typing-indicator span {
                height: 8px;
                width: 8px;
                margin: 0 1px;
                background-color: #888;
                border-radius: 50%;
                display: inline-block;
                animation: typing 1.4s infinite ease-in-out both;
            }
            .typing-indicator span:nth-child(1) {
                animation-delay: -0.32s;
            }
            .typing-indicator span:nth-child(2) {
                animation-delay: -0.16s;
            }
            @keyframes typing {
                0%, 80%, 100% { transform: scale(0); }
                40% { transform: scale(1); }
            }

            /* 知识树节点样式 */
            .tree-node-item {
                @apply flex items-center text-sm transition-colors duration-150;
            }
            .tree-node-item:hover {
                @apply bg-gray-100;
            }
            .tree-node-item.active {
                @apply bg-teal-50 text-teal-600 font-medium;
            }
            .tree-toggle {
                @apply transition-transform duration-150 cursor-pointer;
            }
            .tree-toggle.expanded {
                transform: rotate(90deg);
            }
            .tree-children {
                @apply pl-4 space-y-1;
            }
        }
    </style>
</head>

<body class="bg-bg-light font-sans text-text-primary h-screen flex overflow-hidden antialiased">
    <!-- 左侧栏 -->
    <div class="w-[320px] bg-white border-r border-gray-200 flex flex-col h-full">
        <!-- 顶部标题 -->
        <div class="p-4 border-b border-border-light flex items-center bg-white shadow-sm">
            <div class="w-10 h-10 rounded-lg flex items-center justify-center mr-3 overflow-hidden">
                <img src="https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/bc78a698ed6144caafa7ca5919f41fb0~tplv-a9rns2rl98-image.image?rcl=202512081555431B42F5AF6D301FF2AF76&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1767772585&x-signature=BwnPS1QxO8PKVSCjRs0hcXB%2FBsc%3D"
                     alt="HRssc Logo"
                     class="w-full h-full object-cover rounded-lg"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="w-full h-full bg-teal-100 flex items-center justify-center rounded-lg" style="display:none;">
                    <i class="fa fa-book text-teal-600 text-xl"></i>
                </div>
            </div>
            <h1 class="text-lg font-semibold text-text-primary">HRssc知识管理</h1>
        </div>

        <!-- 搜索框 -->
        <div class="p-4">
            <div class="relative">
                <input type="text" placeholder="搜索指令..." class="input-primary pl-10">
                <i class="fa fa-search absolute left-3 top-3 text-text-secondary"></i>
            </div>
        </div>





        <!-- 指令列表 -->
        <div class="flex-1 overflow-y-auto scrollbar-hide px-4">
            <h2 class="text-sm font-medium text-text-secondary uppercase tracking-wider mb-2">快捷指令</h2>
            <div class="space-y-3">
                <!-- 指令卡片 1 -->
                <div
                    class="command-card p-3 rounded-lg border border-border-light hover:border-primary hover:shadow-sm cursor-pointer transition-all card-hover">
                    <div class="flex items-start">
                        <div class="bg-blue-50 text-primary p-2 rounded-lg mr-3">
                            <i class="fa fa-file-text-o"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-medium text-text-primary">总结文档</h3>
                            <p class="text-sm text-text-secondary mt-1">快捷生成文档摘要</p>
                            <div class="flex items-center mt-2 text-xs text-text-secondary">
                                <i class="fa fa-clock-o mr-1"></i>
                                <span>最近使用：今天</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 指令卡片 2 -->
                <div
                    class="command-card p-3 rounded-lg border border-gray-200 hover:border-primary hover:shadow-sm cursor-pointer transition-all">
                    <div class="flex items-start">
                        <div class="bg-green-100 text-green-600 p-2 rounded-lg mr-3">
                            <i class="fa fa-bar-chart"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-medium">数据分析</h3>
                            <p class="text-sm text-text-secondary mt-1">提取表格数据并分析</p>
                            <div class="flex items-center mt-2 text-xs text-text-secondary">
                                <i class="fa fa-clock-o mr-1"></i>
                                <span>最近使用：昨天</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 指令卡片 3 -->
                <div
                    class="command-card p-3 rounded-lg border border-gray-200 hover:border-primary hover:shadow-sm cursor-pointer transition-all">
                    <div class="flex items-start">
                        <div class="bg-purple-100 text-purple-600 p-2 rounded-lg mr-3">
                            <i class="fa fa-comments-o"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-medium">智能问答</h3>
                            <p class="text-sm text-text-secondary mt-1">基于知识库回答问题</p>
                            <div class="flex items-center mt-2 text-xs text-text-secondary">
                                <i class="fa fa-clock-o mr-1"></i>
                                <span>最近使用：3天前</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 指令卡片 3.5 知识统计 -->
                <div
                    class="command-card p-3 rounded-lg border border-gray-200 hover:border-primary hover:shadow-sm cursor-pointer transition-all">
                    <div class="flex items-start">
                        <div class="bg-indigo-100 text-indigo-600 p-2 rounded-lg mr-3">
                            <i class="fa fa-bar-chart"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-medium">知识统计</h3>
                            <p class="text-sm text-text-secondary mt-1">快速查看知识与工单概览</p>
                            <div class="flex items-center mt-2 text-xs text-text-secondary">
                                <i class="fa fa-clock-o mr-1"></i>
                                <span>最近使用：刚刚</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 指令卡片 3.6 知识管理 -->
                <div
                    class="command-card p-3 rounded-lg border border-gray-200 hover:border-primary hover:shadow-sm cursor-pointer transition-all">
                    <div class="flex items-start">
                        <div class="bg-teal-100 text-teal-600 p-2 rounded-lg mr-3">
                            <i class="fa fa-database"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-medium">知识管理</h3>
                            <p class="text-sm text-text-secondary mt-1">文档库与FAQ库管理</p>
                            <div class="flex items-center mt-2 text-xs text-text-secondary">
                                <i class="fa fa-clock-o mr-1"></i>
                                <span>最近使用：今天</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 指令卡片 3.7 异常处理 -->
                <div
                    class="command-card p-3 rounded-lg border border-gray-200 hover:border-primary hover:shadow-sm cursor-pointer transition-all">
                    <div class="flex items-start">
                        <div class="bg-orange-100 text-orange-600 p-2 rounded-lg mr-3">
                            <i class="fa fa-exclamation-triangle"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-medium">异常处理</h3>
                            <p class="text-sm text-text-secondary mt-1">快速查看并批量处理异常</p>
                            <div class="flex items-center mt-2 text-xs text-text-secondary">
                                <i class="fa fa-clock-o mr-1"></i>
                                <span>最近使用：刚刚</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 指令卡片 5 -->
                <div
                    class="command-card p-3 rounded-lg border border-gray-200 hover:border-primary hover:shadow-sm cursor-pointer transition-all">
                    <div class="flex items-start">
                        <div class="bg-red-100 text-red-600 p-2 rounded-lg mr-3">
                            <i class="fa fa-file-pdf-o"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-medium">PDF转换</h3>
                            <p class="text-sm text-text-secondary mt-1">PDF文件格式转换</p>
                            <div class="flex items-center mt-2 text-xs text-text-secondary">
                                <i class="fa fa-clock-o mr-1"></i>
                                <span>最近使用：2周前</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 底部状态指示器 -->
        <div class="p-4 border-t border-gray-200">
            <div class="flex items-center">
                <div class="w-2 h-2 bg-success rounded-full mr-2"></div>
                <span class="text-sm text-text-secondary">Agent 在线</span>
            </div>
        </div>
    </div>

    <!-- 统计面板遮罩 -->
    <div id="stats-overlay" class="fixed inset-0 bg-black bg-opacity-30 hidden z-30"></div>

    <!-- 统计主面板遮罩（与知识/异常面板保持一致） -->
    <div id="stats-main-overlay" class="fixed inset-0 bg-black bg-opacity-30 hidden z-30"></div>

    <!-- 右侧统计滑出面板 -->
    <div id="stats-panel"
        class="fixed top-0 right-0 h-full w-full sm:w-[520px] bg-white shadow-elevated transform translate-x-full transition-transform duration-300 z-40 flex flex-col">
        <div class="flex items-center justify-between px-4 py-3 border-b border-border-light">
            <div class="flex items-center space-x-2">
                <div class="w-10 h-10 rounded-lg bg-primary bg-opacity-10 flex items-center justify-center">
                    <i class="fa fa-bar-chart text-primary text-lg"></i>
                </div>
                <div>
                    <p class="text-sm text-text-secondary">统计分析</p>
                    <p class="text-base font-semibold text-text-primary">知识与工单概览</p>
                </div>
            </div>
            <button id="stats-close" class="text-text-secondary hover:text-primary">
                <i class="fa fa-times text-lg"></i>
            </button>
        </div>

        <div class="flex-1 overflow-y-auto p-4 space-y-4 bg-bg-light">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-white rounded-lg shadow-card p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">文档冲突</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">12</p>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-red-100 flex items-center justify-center">
                            <i class="fa fa-exclamation-triangle text-red-500 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 flex items-center space-x-2 text-sm text-red-500">
                        <i class="fa fa-arrow-up"></i>
                        <span>较上周 +8%</span>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-card p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">待分类文档</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">28</p>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center">
                            <i class="fa fa-folder-o text-yellow-500 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 flex items-center space-x-2 text-sm text-yellow-500">
                        <i class="fa fa-arrow-up"></i>
                        <span>较上周 +12%</span>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-card p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">FAQ 待审</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">18</p>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
                            <i class="fa fa-question-circle-o text-blue-500 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 flex items-center space-x-2 text-sm text-green-500">
                        <i class="fa fa-arrow-down"></i>
                        <span>环比 -5%</span>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-card p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">待回复工单</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">7</p>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
                            <i class="fa fa-comment-o text-green-500 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 flex items-center space-x-2 text-sm text-green-500">
                        <i class="fa fa-arrow-down"></i>
                        <span>环比 -15%</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-card p-4">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">待办趋势图</h3>
                    <div class="flex items-center space-x-2">
                        <button class="px-3 py-1 text-xs font-medium rounded-md bg-primary text-white">7天</button>
                        <button class="px-3 py-1 text-xs font-medium rounded-md bg-gray-100 text-gray-600 hover:bg-gray-200">30天</button>
                        <button class="px-3 py-1 text-xs font-medium rounded-md bg-gray-100 text-gray-600 hover:bg-gray-200">90天</button>
                    </div>
                </div>
                <div class="h-64 bg-gradient-to-br from-blue-50 to-white rounded-lg flex items-center justify-center relative overflow-hidden">
                    <div class="absolute inset-0 opacity-60" style="background-image: linear-gradient(to right, rgba(22,119,255,0.1) 0%, rgba(22,119,255,0.05) 50%, rgba(22,119,255,0) 100%);"></div>
                    <div class="w-full px-4">
                        <div class="grid grid-cols-12 gap-1 items-end h-48">
                            <div class="bg-primary bg-opacity-60 rounded-t h-12"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-16"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-20"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-10"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-24"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-32"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-28"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-20"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-18"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-24"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-30"></div>
                            <div class="bg-primary bg-opacity-60 rounded-t h-26"></div>
                        </div>
                        <p class="text-center text-xs text-text-secondary mt-3">最近 12 周趋势（模拟数据）</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 管理面板遮罩 -->
    <div id="mgmt-overlay" class="fixed inset-0 bg-black bg-opacity-30 hidden z-30"></div>

    <!-- 处理面板遮罩 -->
    <div id="detail-overlay" class="fixed inset-0 bg-black bg-opacity-30 hidden z-40"></div>

    <!-- 处理面板 -->
    <div id="detail-panel"
        class="fixed top-0 right-0 h-full w-[600px] bg-white shadow-elevated transform translate-x-full transition-transform duration-300 z-50 flex flex-col">
        <!-- 顶部控制栏 -->
        <div class="flex items-center justify-between px-4 py-3 border-b border-border-light sticky top-0 bg-white z-10">
            <div class="flex items-center space-x-2">
                <i id="detail-icon" class="fa fa-exclamation-circle text-warning text-lg"></i>
                <span class="font-semibold text-text-primary" id="detail-title">处理详情</span>
            </div>
            <button id="detail-close" class="text-text-secondary hover:text-primary transition-colors">
                <i class="fa fa-times text-lg"></i>
            </button>
        </div>

        <!-- 内容区域（动态加载） -->
        <div id="detail-content" class="flex-1 overflow-y-auto p-4 bg-bg-light"></div>
    </div>

    <!-- 批量处理对话框遮罩 -->
    <div id="batch-dialog-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50"></div>

    <!-- 批量处理对话框 -->
    <div id="batch-dialog" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-2xl w-full max-w-md hidden z-50">
        <div class="p-6">
            <h3 class="text-lg font-semibold text-text-primary mb-4" id="batch-dialog-title">批量处理</h3>
            <div id="batch-dialog-content" class="mb-6">
                <!-- 动态内容 -->
            </div>
            <div class="flex justify-end space-x-3">
                <button class="btn-secondary" id="batch-dialog-cancel">取消</button>
                <button class="btn-primary" id="batch-dialog-confirm">确认</button>
            </div>
        </div>
    </div>

    <!-- 异常列表面板遮罩 -->
    <div id="exception-overlay" class="fixed inset-0 bg-black bg-opacity-30 hidden z-30"></div>

    <!-- 异常列表面板 (表格管理风格 - 橙色系) -->
    <div id="exception-panel"
        class="fixed top-0 right-0 h-full w-[720px] bg-white shadow-elevated transform translate-x-full transition-transform duration-300 z-40 flex flex-col">
        <!-- 左侧拖拽手柄 -->
        <div id="exception-resize-handle" class="absolute left-0 top-0 h-full w-1 bg-gray-300 hover:bg-orange-500 cursor-col-resize transition-colors z-50"></div>

        <!-- 顶部控制栏 -->
        <div class="flex items-center justify-between px-5 py-4 border-b border-orange-100 sticky top-0 bg-gradient-to-r from-orange-50 to-white z-10">
            <div class="flex items-center space-x-2">
                <div class="w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center">
                    <i class="fa fa-exclamation-triangle text-orange-600 text-lg"></i>
                </div>
                <div>
                    <p class="text-sm text-orange-600">异常管理</p>
                    <p class="text-base font-semibold text-text-primary">统一处理异常知识</p>
                </div>
            </div>
            <button id="exception-close" class="text-text-secondary hover:text-orange-600 transition-colors">
                <i class="fa fa-times text-lg"></i>
            </button>
        </div>

        <!-- 内容区域 -->
        <div id="exception-panel-body" class="flex-1 overflow-y-auto p-4 bg-gradient-to-b from-orange-50/20 to-white">
            <div id="exception-list-view">
                <!-- 筛选器 -->
                <div class="bg-white rounded-lg shadow-card p-4 mb-4">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-text-secondary mb-2">类型筛选</label>
                            <select class="input-primary" id="exception-type-filter">
                                <option value="all">全部</option>
                                <option value="conflict">文档冲突</option>
                                <option value="category">待分类</option>
                                <option value="faq">FAQ待审</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-text-secondary mb-2">状态筛选</label>
                            <select class="input-primary" id="exception-status-filter">
                                <option value="all">全部</option>
                                <option value="pending">待处理</option>
                                <option value="in_progress">处理中</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-text-secondary mb-2">搜索</label>
                            <input type="text" class="input-primary" placeholder="关键词搜索..." id="exception-search">
                        </div>
                    </div>
                </div>

                <!-- 批量操作工具栏 -->
                <div class="bg-white rounded-lg shadow-card p-3 mb-4 flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" id="exception-select-all" class="w-4 h-4">
                        <span class="text-sm text-text-secondary">已选择 <span id="exception-selected-count">0</span> 项</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <button class="btn-primary text-sm px-3 py-1.5" id="exception-batch-handle">
                            <i class="fa fa-check mr-1"></i> 批量处理
                        </button>
                        <button class="btn-secondary text-sm px-3 py-1.5" id="exception-batch-ignore">
                            <i class="fa fa-times mr-1"></i> 批量忽略
                        </button>
                    </div>
                </div>

                <!-- 异常列表 -->
                <div class="bg-white rounded-lg shadow-card overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-gray-50 border-b border-border-light">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-medium text-text-secondary uppercase w-12"></th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-text-secondary uppercase">知识点描述</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-text-secondary uppercase w-24">类型</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-text-secondary uppercase w-32">检测时间</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-text-secondary uppercase w-20">优先级</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-text-secondary uppercase w-32">操作</th>
                            </tr>
                        </thead>
                        <tbody id="exception-list" class="divide-y divide-border-light">
                            <!-- 动态生成异常列表 -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 异常详情视图（面板内切换，不离开列表） -->
            <div id="exception-detail-view" class="hidden space-y-4">
                <div class="bg-white rounded-lg shadow-card p-4 flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <button id="exception-back-btn" class="btn-secondary text-sm px-3 py-1.5">
                            <i class="fa fa-arrow-left mr-1"></i> 返回列表
                        </button>
                        <div>
                            <p id="exception-detail-type" class="text-xs text-orange-600">异常详情</p>
                            <p id="exception-detail-title" class="text-base font-semibold text-text-primary">知识点标题</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <span id="exception-detail-priority" class="px-2 py-1 rounded-full text-xs bg-red-100 text-red-800">高</span>
                        <p id="exception-detail-time" class="text-xs text-text-secondary mt-1"></p>
                    </div>
                </div>
                <div id="exception-detail-content" class="space-y-4"></div>
            </div>
        </div>
    </div>

    <!-- 知识管理遮罩 -->
    <div id="knowledge-overlay" class="fixed inset-0 bg-black bg-opacity-30 hidden z-30"></div>

    <!-- 知识管理面板 (侧边栏模式 - 绿色系) -->
    <div id="knowledge-panel"
        class="fixed top-0 right-0 h-full w-[800px] bg-white shadow-elevated transform translate-x-full transition-transform duration-300 z-40 flex flex-col">
        <!-- 左侧拖拽手柄 -->
        <div id="panel-resize-handle" class="absolute left-0 top-0 h-full w-1 bg-gray-300 hover:bg-teal-500 cursor-col-resize transition-colors z-50"></div>

        <!-- 顶部控制栏 -->
        <div class="flex items-center justify-between px-5 py-4 border-b border-teal-100 sticky top-0 bg-gradient-to-r from-teal-50 to-white z-10">
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <div class="w-10 h-10 rounded-lg bg-teal-100 flex items-center justify-center">
                        <i class="fa fa-database text-teal-600 text-lg"></i>
                    </div>
                    <div>
                        <p class="text-sm text-teal-600">知识管理</p>
                        <p class="text-base font-semibold text-text-primary">知识库管理系统</p>
                    </div>
                </div>
                <!-- 顶部库类型切换标签 -->
                <div class="flex border-b-0 ml-8">
                    <button id="tab-doc-library" class="library-tab px-4 py-2 text-sm font-medium border-b-2 border-teal-600 text-teal-600 bg-teal-50 rounded-t-lg">
                        <i class="fa fa-file-text mr-1"></i>文档库
                    </button>
                    <button id="tab-faq-library" class="library-tab px-4 py-2 text-sm font-medium border-b-2 border-transparent text-text-secondary hover:text-teal-600 rounded-t-lg ml-1">
                        <i class="fa fa-question-circle mr-1"></i>FAQ库
                    </button>
                </div>
            </div>
            <button id="knowledge-close" class="text-text-secondary hover:text-teal-600 transition-colors">
                <i class="fa fa-times text-lg"></i>
            </button>
        </div>

        <!-- 文档库内容区 -->
        <div id="doc-library-content" class="flex flex-1 overflow-hidden">
            <!-- 左侧：知识体系树 -->
            <div id="knowledge-tree-side" class="w-64 border-r border-gray-200 flex flex-col bg-gray-50">
                <!-- 树标题和操作按钮 -->
                <div class="px-4 py-3 border-b border-gray-200 bg-white">
                    <div class="flex items-center justify-between">
                        <h3 class="font-semibold text-gray-800 flex items-center">
                            <i class="fa fa-sitemap mr-2 text-teal-600"></i>
                            知识体系
                        </h3>
                        <button id="add-category-btn" class="text-teal-600 hover:text-teal-700 text-sm" title="添加分类">
                            <i class="fa fa-plus-circle"></i>
                        </button>
                    </div>
                </div>

                <!-- 树搜索 -->
                <div class="px-4 py-3 border-b border-gray-200 bg-white">
                    <div class="relative">
                        <input type="text" id="tree-search" placeholder="搜索分类..."
                               class="w-full pl-8 pr-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500">
                        <i class="fa fa-search absolute left-2.5 top-2.5 text-gray-400"></i>
                    </div>
                </div>

                <!-- 树节点列表 -->
                <div id="knowledge-tree-nodes" class="flex-1 overflow-y-auto p-2">
                    <div class="text-sm text-gray-500 px-3 py-2">正在加载知识分类体系...</div>
                </div>
            </div>

            <!-- 可拖动分隔条 -->
            <div id="knowledge-divider" class="w-1 bg-gray-200 hover:bg-teal-500 cursor-col-resize transition-colors"></div>

            <!-- 右侧：文档内容区 -->
            <div class="flex-1 flex flex-col overflow-hidden">
                <!-- 面包屑 -->
                <div class="px-5 py-3 border-b border-gray-100 bg-white">
                    <div id="knowledge-breadcrumb" class="flex items-center text-sm text-gray-500">
                        <i class="fa fa-home mr-1"></i>
                        <span id="breadcrumb-text">全部知识</span>
                    </div>
                </div>

                <!-- 文档列表区域 -->
                <div class="flex-1 overflow-y-auto p-4 bg-gradient-to-b from-teal-50/20 to-white">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">文档列表</h3>
                    <button id="add-document-btn" class="px-3 py-1.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 text-sm">
                        <i class="fa fa-plus mr-1"></i>添加文档
                    </button>
                </div>
                <div id="node-meta-panel" class="grid md:grid-cols-2 gap-3 mb-4"></div>
                <div id="documents-list" class="space-y-3">
                    <!-- 文档列表将通过JavaScript动态生成 -->
                    <div class="text-center text-text-secondary py-8">
                        <i class="fa fa-folder-open-o text-4xl mb-3"></i>
                        <p>请从左侧选择知识分类查看文档</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- FAQ库内容区 -->
        <div id="faq-library-content" class="flex-1 flex-col overflow-hidden hidden">
            <!-- FAQ顶部操作栏 -->
            <div class="px-5 py-4 border-b border-gray-100 bg-white">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-800">FAQ列表</h3>
                        <p class="text-sm text-gray-500 mt-1">FAQ库统一管理，不区分知识体系</p>
                    </div>
                    <button id="add-faq-btn" class="px-3 py-1.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 text-sm">
                        <i class="fa fa-plus mr-1"></i>添加FAQ
                    </button>
                </div>
            </div>

            <!-- FAQ列表区域 -->
            <div class="flex-1 overflow-y-auto p-4 bg-gradient-to-b from-teal-50/20 to-white">
                <div id="faq-list" class="space-y-3">
                    <!-- FAQ列表将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- 文档上传弹窗 -->
    <div id="add-document-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-2xl mx-4">
            <!-- 标题栏 -->
            <div class="flex items-center justify-between px-6 py-4 border-b border-gray-200">
                <h3 class="text-lg font-semibold text-text-primary">添加文档</h3>
                <button id="close-document-modal" class="text-text-secondary hover:text-text-primary">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>

            <!-- 内容区域 -->
            <div class="px-6 py-4 max-h-[70vh] overflow-y-auto">
                <!-- 选择知识体系 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-text-primary mb-2">
                        选择知识分类 <span class="text-red-500">*</span>
                    </label>
                    <select id="doc-category-select" class="input-primary">
                        <option value="">请选择...</option>
                        <!-- 动态生成分类选项 -->
                    </select>
                </div>

                <!-- 文件上传区域 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-text-primary mb-2">
                        上传文档 <span class="text-red-500">*</span>
                    </label>
                    <div id="file-drop-zone"
                         class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-teal-500 transition-colors cursor-pointer">
                        <i class="fa fa-cloud-upload text-4xl text-gray-400 mb-3"></i>
                        <p class="text-text-secondary mb-2">拖拽文件到此处,或点击选择文件</p>
                        <p class="text-xs text-text-secondary">支持 PDF、Word、Excel、PPT 等格式</p>
                        <input type="file" id="modal-file-input" class="hidden" multiple
                               accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt">
                    </div>

                    <!-- 文件列表 -->
                    <div id="modal-file-list" class="mt-4 space-y-2">
                        <!-- 动态生成文件卡片 -->
                    </div>
                </div>

                <!-- 知识加工维度 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-text-primary mb-3">
                        知识加工维度
                    </label>
                    <div class="space-y-3">
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" id="process-summary" class="w-4 h-4 text-teal-600 rounded" checked>
                            <span class="ml-2 text-sm">摘要生成</span>
                            <span class="ml-2 text-xs text-gray-500">自动生成文档摘要</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" id="process-tags" class="w-4 h-4 text-teal-600 rounded" checked>
                            <span class="ml-2 text-sm">标签映射</span>
                            <span class="ml-2 text-xs text-gray-500">自动提取文档关键词标签</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="checkbox" id="process-faq" class="w-4 h-4 text-teal-600 rounded">
                            <span class="ml-2 text-sm">FAQ挖掘</span>
                            <span class="ml-2 text-xs text-gray-500">从文档中提取常见问答</span>
                        </label>
                    </div>
                </div>

                <!-- FAQ泛化选项（默认隐藏） -->
                <div id="faq-generalization-options" class="hidden mb-6 ml-6 p-4 bg-teal-50 rounded-lg border border-teal-200">
                    <label class="flex items-center cursor-pointer mb-3">
                        <input type="checkbox" id="enable-faq-generalization" class="w-4 h-4 text-teal-600 rounded">
                        <span class="ml-2 text-sm font-medium">启用FAQ相似问泛化</span>
                        <span class="ml-2 text-xs text-gray-500">为每个FAQ生成多个相似问法</span>
                    </label>

                    <!-- 泛化数量设置（默认隐藏） -->
                    <div id="faq-gen-count-setting" class="hidden">
                        <label class="block text-sm font-medium text-text-primary mb-2">
                            泛化问题数量
                        </label>
                        <div class="flex items-center space-x-4">
                            <input type="range" id="faq-gen-count-slider"
                                   min="1" max="10" value="3"
                                   class="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                            <span id="faq-gen-count-value" class="text-lg font-semibold text-teal-600 w-12 text-center">3</span>
                            <span class="text-sm text-gray-500">个</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">
                            为每个FAQ生成 <span class="font-medium text-teal-600" id="faq-gen-count-text">3</span> 个相似问法
                        </p>
                    </div>
                </div>
            </div>

            <!-- 底部按钮 -->
            <div class="flex justify-end space-x-3 px-6 py-4 border-t border-gray-200 bg-gray-50">
                <button id="cancel-document-btn" class="btn-secondary">取消</button>
                <button id="confirm-document-btn" class="btn-primary">
                    <i class="fa fa-check mr-1"></i>开始处理
                </button>
            </div>
        </div>
    </div>

    <!-- 统计面板 (Dashboard风格 - 蓝色系) -->
    <div id="stats-panel-main"
        class="fixed top-0 right-0 h-full w-full sm:w-[720px] bg-white shadow-elevated transform translate-x-full transition-transform duration-300 z-40 overflow-y-auto">
        <!-- 左侧拖拽手柄 -->
        <div id="stats-resize-handle" class="absolute left-0 top-0 h-full w-1 bg-gray-300 hover:bg-blue-500 cursor-col-resize transition-colors z-50"></div>
        <div class="flex items-center justify-between px-5 py-4 border-b border-blue-100 sticky top-0 bg-gradient-to-r from-blue-50 to-white z-10">
            <div class="flex items-center space-x-2">
                <div class="w-10 h-10 rounded-lg bg-primary bg-opacity-10 flex items-center justify-center">
                    <i class="fa fa-bar-chart text-primary text-lg"></i>
                </div>
                <div>
                    <p class="text-sm text-blue-600">统计分析</p>
                    <p class="text-base font-semibold text-text-primary">知识库数据概览</p>
                </div>
            </div>
            <button id="stats-main-close" class="text-text-secondary hover:text-primary">
                <i class="fa fa-times text-lg"></i>
            </button>
        </div>

        <div class="p-4 bg-gradient-to-b from-blue-50/30 to-white space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="bg-white rounded-lg shadow-card p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">文档冲突</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">12</p>
                            <p class="text-xs text-text-secondary mt-1">新增 3 条 • 高优先级</p>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-red-100 flex items-center justify-center">
                            <i class="fa fa-exclamation-triangle text-red-500 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 flex items-center space-x-2 text-sm text-red-500">
                        <i class="fa fa-arrow-up"></i>
                        <span>较上周 +8%</span>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-card p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">待分类文档</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">28</p>
                            <p class="text-xs text-text-secondary mt-1">自动分类命中率 76%</p>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center">
                            <i class="fa fa-folder-o text-yellow-500 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 flex items-center space-x-2 text-sm text-yellow-500">
                        <i class="fa fa-arrow-up"></i>
                        <span>较上周 +12%</span>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-card p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">FAQ 待审</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">18</p>
                            <p class="text-xs text-text-secondary mt-1">SLA：需在 24h 内审核</p>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
                            <i class="fa fa-question-circle-o text-blue-500 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 flex items-center space-x-2 text-sm text-green-500">
                        <i class="fa fa-arrow-down"></i>
                        <span>环比 -5%</span>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-card p-4 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500">待回复工单</p>
                            <p class="text-3xl font-bold text-gray-800 mt-1">7</p>
                            <p class="text-xs text-text-secondary mt-1">平均等待 14 分钟</p>
                        </div>
                        <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
                            <i class="fa fa-comment-o text-green-500 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 flex items-center space-x-2 text-sm text-green-500">
                        <i class="fa fa-arrow-down"></i>
                        <span>环比 -15%</span>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                <div class="bg-white rounded-lg shadow-card p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">知识利用率</h3>
                        <span class="text-xs px-2 py-1 rounded-full bg-blue-50 text-primary">近30天</span>
                    </div>
                    <div class="flex items-center">
                        <div class="relative w-24 h-24 mr-4">
                            <div class="absolute inset-0 rounded-full" style="background: conic-gradient(#1677FF 0% 82%, #E5E7EB 82% 100%);"></div>
                            <div class="absolute inset-2 bg-white rounded-full flex flex-col items-center justify-center">
                                <span class="text-lg font-semibold text-primary">82%</span>
                                <span class="text-xs text-text-secondary">总体</span>
                            </div>
                        </div>
                        <div class="flex-1 space-y-3">
                            <div>
                                <div class="flex items-center justify-between text-sm font-medium">
                                    <span>文档引用率</span>
                                    <span class="text-text-secondary">68%</span>
                                </div>
                                <div class="w-full h-2 bg-gray-100 rounded-full mt-1">
                                    <div class="h-2 bg-primary rounded-full" style="width: 68%;"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex items-center justify-between text-sm font-medium">
                                    <span>FAQ 命中率</span>
                                    <span class="text-text-secondary">76%</span>
                                </div>
                                <div class="w-full h-2 bg-gray-100 rounded-full mt-1">
                                    <div class="h-2 bg-green-500 rounded-full" style="width: 76%;"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex items-center justify-between text-sm font-medium">
                                    <span>自助解决占比</span>
                                    <span class="text-text-secondary">54%</span>
                                </div>
                                <div class="w-full h-2 bg-gray-100 rounded-full mt-1">
                                    <div class="h-2 bg-amber-400 rounded-full" style="width: 54%;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="text-xs text-text-secondary mt-3">昨日自助解决 124 次，节省人工 18.6 小时</p>
                </div>

                <div class="bg-white rounded-lg shadow-card p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">知识缺口统计</h3>
                        <span class="text-xs text-text-secondary">缺口合计 42 条</span>
                    </div>
                    <div class="space-y-3">
                        <div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="flex items-center">
                                    <span class="w-2 h-2 rounded-full bg-red-400 mr-2"></span>
                                    社保政策更新
                                </span>
                                <span class="text-text-secondary">12 条</span>
                            </div>
                            <div class="w-full h-2 bg-gray-100 rounded-full mt-1">
                                <div class="h-2 rounded-full bg-red-400" style="width: 78%;"></div>
                            </div>
                            <p class="text-xs text-text-secondary mt-1">缺少最新报销流程与示例</p>
                        </div>
                        <div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="flex items-center">
                                    <span class="w-2 h-2 rounded-full bg-amber-400 mr-2"></span>
                                    假勤制度
                                </span>
                                <span class="text-text-secondary">9 条</span>
                            </div>
                            <div class="w-full h-2 bg-gray-100 rounded-full mt-1">
                                <div class="h-2 rounded-full bg-amber-400" style="width: 62%;"></div>
                            </div>
                            <p class="text-xs text-text-secondary mt-1">待补充请假场景与操作指引</p>
                        </div>
                        <div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="flex items-center">
                                    <span class="w-2 h-2 rounded-full bg-blue-400 mr-2"></span>
                                    培训体系
                                </span>
                                <span class="text-text-secondary">6 条</span>
                            </div>
                            <div class="w-full h-2 bg-gray-100 rounded-full mt-1">
                                <div class="h-2 rounded-full bg-blue-400" style="width: 48%;"></div>
                            </div>
                            <p class="text-xs text-text-secondary mt-1">缺少课程 QA 与讲师联系入口</p>
                        </div>
                        <div>
                            <div class="flex items-center justify-between text-sm">
                                <span class="flex items-center">
                                    <span class="w-2 h-2 rounded-full bg-teal-400 mr-2"></span>
                                    福利申领
                                </span>
                                <span class="text-text-secondary">5 条</span>
                            </div>
                            <div class="w-full h-2 bg-gray-100 rounded-full mt-1">
                                <div class="h-2 rounded-full bg-teal-400" style="width: 40%;"></div>
                            </div>
                            <p class="text-xs text-text-secondary mt-1">待补齐申领路径和表单模板</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-card p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">高质量支持 TOP5</h3>
                        <span class="text-xs text-text-secondary">按 CSAT & 解决时长</span>
                    </div>
                    <ul class="divide-y divide-border-light">
                        <li class="py-2 flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-text-primary">入职手续指引</p>
                                <p class="text-xs text-text-secondary">满意度 4.9 • 平均 6 分钟</p>
                            </div>
                            <span class="px-2 py-1 rounded-full bg-green-50 text-green-600 text-xs font-medium">CSAT 97%</span>
                        </li>
                        <li class="py-2 flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-text-primary">年假计算</p>
                                <p class="text-xs text-text-secondary">满意度 4.8 • 平均 4 分钟</p>
                            </div>
                            <span class="px-2 py-1 rounded-full bg-green-50 text-green-600 text-xs font-medium">CSAT 95%</span>
                        </li>
                        <li class="py-2 flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-text-primary">社保基数调整</p>
                                <p class="text-xs text-text-secondary">满意度 4.7 • 平均 5 分钟</p>
                            </div>
                            <span class="px-2 py-1 rounded-full bg-green-50 text-green-600 text-xs font-medium">CSAT 94%</span>
                        </li>
                        <li class="py-2 flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-text-primary">培训报名</p>
                                <p class="text-xs text-text-secondary">满意度 4.7 • 平均 8 分钟</p>
                            </div>
                            <span class="px-2 py-1 rounded-full bg-green-50 text-green-600 text-xs font-medium">CSAT 93%</span>
                        </li>
                        <li class="py-2 flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-text-primary">福利兑换</p>
                                <p class="text-xs text-text-secondary">满意度 4.6 • 平均 7 分钟</p>
                            </div>
                            <span class="px-2 py-1 rounded-full bg-green-50 text-green-600 text-xs font-medium">CSAT 92%</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                <div class="bg-white rounded-lg shadow-card p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">待办趋势图</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-xs font-medium rounded-md bg-primary text-white">7天</button>
                            <button class="px-3 py-1 text-xs font-medium rounded-md bg-gray-100 text-gray-600 hover:bg-gray-200">30天</button>
                            <button class="px-3 py-1 text-xs font-medium rounded-md bg-gray-100 text-gray-600 hover:bg-gray-200">90天</button>
                        </div>
                    </div>
                    <div class="h-64 bg-gradient-to-br from-blue-50 to-white rounded-lg flex items-center justify-center relative overflow-hidden">
                        <div class="absolute inset-0 opacity-60" style="background-image: linear-gradient(to right, rgba(22,119,255,0.1) 0%, rgba(22,119,255,0.05) 50%, rgba(22,119,255,0) 100%);"></div>
                        <div class="w-full px-4">
                            <div class="grid grid-cols-12 gap-1 items-end h-48">
                                <div class="bg-primary bg-opacity-60 rounded-t h-12"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-16"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-20"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-10"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-24"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-32"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-28"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-20"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-18"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-24"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-30"></div>
                                <div class="bg-primary bg-opacity-60 rounded-t h-26"></div>
                            </div>
                            <p class="text-center text-xs text-text-secondary mt-3">最近 12 周趋势（模拟数据）</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-card p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">高频问题 TOP5</h3>
                        <span class="text-xs text-text-secondary">近7天</span>
                    </div>
                    <ul class="space-y-2">
                        <li class="flex items-center justify-between bg-blue-50 rounded-lg px-3 py-2">
                            <div class="flex items-center space-x-3">
                                <span class="w-6 h-6 rounded-full bg-primary text-white text-xs flex items-center justify-center font-semibold">1</span>
                                <div>
                                    <p class="text-sm font-medium text-text-primary">医保报销怎么走</p>
                                    <p class="text-xs text-text-secondary">命中 FAQ 86 次</p>
                                </div>
                            </div>
                            <span class="text-xs text-green-600">+14%</span>
                        </li>
                        <li class="flex items-center justify-between px-3 py-2 rounded-lg border border-gray-100">
                            <div class="flex items-center space-x-3">
                                <span class="w-6 h-6 rounded-full bg-gray-100 text-text-primary text-xs flex items-center justify-center font-semibold">2</span>
                                <div>
                                    <p class="text-sm font-medium text-text-primary">报销失败如何补充材料</p>
                                    <p class="text-xs text-text-secondary">命中 FAQ 64 次</p>
                                </div>
                            </div>
                            <span class="text-xs text-green-600">+8%</span>
                        </li>
                        <li class="flex items-center justify-between px-3 py-2 rounded-lg border border-gray-100">
                            <div class="flex items-center space-x-3">
                                <span class="w-6 h-6 rounded-full bg-gray-100 text-text-primary text-xs flex items-center justify-center font-semibold">3</span>
                                <div>
                                    <p class="text-sm font-medium text-text-primary">年假如何折算</p>
                                    <p class="text-xs text-text-secondary">命中 FAQ 52 次</p>
                                </div>
                            </div>
                            <span class="text-xs text-amber-500">+3%</span>
                        </li>
                        <li class="flex items-center justify-between px-3 py-2 rounded-lg border border-gray-100">
                            <div class="flex items-center space-x-3">
                                <span class="w-6 h-6 rounded-full bg-gray-100 text-text-primary text-xs flex items-center justify-center font-semibold">4</span>
                                <div>
                                    <p class="text-sm font-medium text-text-primary">社保基数怎么调整</p>
                                    <p class="text-xs text-text-secondary">命中 FAQ 41 次</p>
                                </div>
                            </div>
                            <span class="text-xs text-red-500">-6%</span>
                        </li>
                        <li class="flex items-center justify-between px-3 py-2 rounded-lg border border-gray-100">
                            <div class="flex items-center space-x-3">
                                <span class="w-6 h-6 rounded-full bg-gray-100 text-text-primary text-xs flex items-center justify-center font-semibold">5</span>
                                <div>
                                    <p class="text-sm font-medium text-text-primary">培训报名入口</p>
                                    <p class="text-xs text-text-secondary">命中 FAQ 33 次</p>
                                </div>
                            </div>
                            <span class="text-xs text-green-600">+11%</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 右侧主区域 -->
    <div class="flex-1 flex flex-col h-full bg-bg-light overflow-hidden">
        <!-- 顶部标题栏 -->
        <div class="bg-white border-b border-border-light p-4 flex items-center justify-between shadow-sm">
            <div class="flex items-center">
                <h2 class="text-lg font-semibold text-text-primary">对话</h2>
                <span class="ml-3 px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded-full flex items-center">
                    <span class="w-1.5 h-1.5 bg-green-500 rounded-full mr-1"></span>
                    在线
                </span>
            </div>
            <div class="flex items-center space-x-2">
                <button
                    class="p-2 rounded-full hover:bg-gray-100 transition-colors text-text-secondary hover:text-primary">
                    <i class="fa fa-history"></i>
                </button>
                <button
                    class="p-2 rounded-full hover:bg-gray-100 transition-colors text-text-secondary hover:text-primary">
                    <i class="fa fa-search"></i>
                </button>
                <button
                    class="p-2 rounded-full hover:bg-gray-100 transition-colors text-text-secondary hover:text-primary">
                    <i class="fa fa-cog"></i>
                </button>
                <div class="flex items-center ml-2">
                    <div class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center">
                        <span>管</span>
                    </div>
                    <span class="ml-2 text-sm font-medium">管理员</span>
                </div>
            </div>
        </div>

        <!-- 对话显示区 -->
        <div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-6 relative">
            <!-- 空状态 -->
            <div id="empty-state" class="flex flex-col items-center justify-center h-full">
                <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/67eb59dbd0544c4789867a135cfcdbdd~tplv-a9rns2rl98-image.image?rcl=2025121118384047886C3B2CB1EA7F871D&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1768041561&x-signature=Vxgo3Ykf6OWgjhKCeRnDLNDGKOA%3D"
                    alt="开始对话" class="w-64 h-64 mb-4">
                <h3 class="text-lg font-medium mb-2">开始您的第一次对话</h3>
                <p class="text-text-secondary text-center max-w-md">上传文件或选择左侧指令开始与智能助手交互</p>
            </div>

            <!-- 对话历史 (默认隐藏，有消息时显示) -->
            <div id="chat-history" class="hidden space-y-6">
                <!-- 系统消息 -->
                <div class="flex justify-center">
                    <div class="bg-gray-100 text-text-secondary text-sm px-4 py-2 rounded-full">
                        今天 14:30
                    </div>
                </div>

                <!-- 用户消息 -->
                <div class="flex justify-end">
                    <div class="max-w-[70%]">
                        <div class="flex items-center justify-end mb-1">
                            <span class="text-xs text-text-secondary mr-2">您</span>
                        </div>
                        <div class="message-bubble-user p-3">
                            <p>请帮我分析这份销售数据</p>
                        </div>
                    </div>
                </div>

                <!-- 系统消息 - 文件上传 -->
                <div class="flex justify-end">
                    <div class="max-w-[70%]">
                        <div class="flex items-center justify-end mb-1">
                            <span class="text-xs text-text-secondary mr-2">您</span>
                        </div>
                        <div class="message-bubble-user p-3">
                            <div class="flex items-center bg-blue-700 p-2 rounded-lg">
                                <i class="fa fa-file-excel-o text-white mr-2"></i>
                                <div class="flex-1">
                                    <p class="text-sm font-medium truncate">销售数据Q3.xlsx</p>
                                    <p class="text-xs text-blue-100">2.5 MB</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 系统消息 - 处理中 -->
                <div class="flex fade-in">
                    <div class="max-w-[70%]">
                        <div class="flex items-center mb-1">
                            <div
                                class="w-8 h-8 rounded-full bg-primary bg-opacity-10 flex items-center justify-center mr-2">
                                <i class="fa fa-robot text-primary text-xs"></i>
                            </div>
                            <span class="text-xs text-text-secondary">智能助手</span>
                        </div>
                        <div class="message-bubble-system p-3">
                            <div class="flex items-center">
                                <div class="typing-indicator mr-2">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div>
                                <p class="text-text-secondary">正在处理文件，请稍候...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 系统消息 - 处理结果 -->
                <div class="flex">
                    <div class="max-w-[70%]">
                        <div class="flex items-center mb-1">
                            <div
                                class="w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center mr-2">
                                <i class="fa fa-robot text-xs"></i>
                            </div>
                            <span class="text-xs text-text-secondary">智能助手</span>
                        </div>
                        <div class="message-bubble-system p-3">
                            <p class="flex items-center text-success mb-2">
                                <i class="fa fa-check-circle mr-2"></i>
                                文件上传成功，已添加至知识库
                            </p>
                            <p class="mb-2">我已分析完成您的销售数据，以下是主要发现：</p>
                            <ul class="list-disc pl-5 space-y-1">
                                <li>Q3总销售额较Q2增长了15.3%</li>
                                <li>华东地区表现最佳，贡献了42%的销售额</li>
                                <li>产品A是销量最高的产品，占比达到38%</li>
                                <li>建议关注华南地区的销售下滑趋势</li>
                            </ul>
                            <div class="mt-3 bg-gray-50 p-2 rounded-lg">
                                <p class="text-sm font-medium">是否需要生成详细的分析报告？</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 用户消息 -->
                <div class="flex justify-end">
                    <div class="max-w-[70%]">
                        <div class="flex items-center justify-end mb-1">
                            <span class="text-xs text-text-secondary mr-2">您</span>
                        </div>
                        <div class="message-bubble-user p-3">
                            <p>是的，请生成详细报告</p>
                        </div>
                    </div>
                </div>

                <!-- 系统消息 - 处理中 -->
                <div class="flex">
                    <div class="max-w-[70%]">
                        <div class="flex items-center mb-1">
                            <div
                                class="w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center mr-2">
                                <i class="fa fa-robot text-xs"></i>
                            </div>
                            <span class="text-xs text-text-secondary">智能助手</span>
                        </div>
                        <div class="message-bubble-system p-3">
                            <div class="flex items-center">
                                <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-primary mr-2"></div>
                                <p>正在生成报告，请稍候...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 系统消息 - 处理结果 -->
                <div class="flex">
                    <div class="max-w-[70%]">
                        <div class="flex items-center mb-1">
                            <div
                                class="w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center mr-2">
                                <i class="fa fa-robot text-xs"></i>
                            </div>
                            <span class="text-xs text-text-secondary">智能助手</span>
                        </div>
                        <div class="message-bubble-system p-3">
                            <p class="mb-2">报告已生成完成，主要内容包括：</p>
                            <ul class="list-disc pl-5 space-y-1">
                                <li>销售业绩总览</li>
                                <li>各地区销售对比分析</li>
                                <li>产品销售排行榜</li>
                                <li>客户群体分析</li>
                                <li>未来销售趋势预测</li>
                                <li>改进建议</li>
                            </ul>
                            <div class="mt-3 flex">
                                <button class="bg-primary text-white px-3 py-1 rounded-lg text-sm flex items-center">
                                    <i class="fa fa-download mr-1"></i>
                                    下载报告
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 系统消息 - 文件已存在示例 -->
                <div class="flex">
                    <div class="max-w-[70%]">
                        <div class="flex items-center mb-1">
                            <div
                                class="w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center mr-2">
                                <i class="fa fa-robot text-xs"></i>
                            </div>
                            <span class="text-xs text-text-secondary">智能助手</span>
                        </div>
                        <div class="message-bubble-system p-3">
                            <p class="flex items-center text-warning mb-2">
                                <i class="fa fa-exclamation-circle mr-2"></i>
                                文档已存在，不需要再次上传
                            </p>
                            <div class="flex justify-end mt-2">
                                <button id="admin-handle-btn"
                                    class="bg-primary text-white px-3 py-1 rounded-lg text-sm">
                                    处理
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 系统消息 - 相似度较高示例 -->
                <div class="flex">
                    <div class="max-w-[70%]">
                        <div class="flex items-center mb-1">
                            <div
                                class="w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center mr-2">
                                <i class="fa fa-robot text-xs"></i>
                            </div>
                            <span class="text-xs text-text-secondary">智能助手</span>
                        </div>
                        <div class="message-bubble-system p-3">
                            <p class="flex items-center text-warning mb-2">
                                <i class="fa fa-search mr-2"></i>
                                检测到相似内容
                            </p>
                            <div class="bg-gray-50 p-2 rounded-lg mb-2">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-sm truncate">销售数据Q3-更新版.xlsx</span>
                                    <span class="text-xs text-text-secondary">相似度：85%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm truncate">销售数据Q2.xlsx</span>
                                    <span class="text-xs text-text-secondary">相似度：72%</span>
                                </div>
                            </div>
                            <div class="flex justify-end mt-2">
                                <button class="bg-primary text-white px-3 py-1 rounded-lg text-sm">
                                    处理
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 输入框区域 -->
            <div class="p-4 border-t border-border-light bg-white sticky bottom-0 z-10">
                <!-- 文件预览区域 (输入框上方) -->
                <div id="file-preview-container" class="hidden mb-2">
                    <div class="flex items-center justify-between text-sm text-text-secondary mb-2">
                        <div class="flex items-center space-x-2">
                            <span class="font-medium text-text-primary">附件</span>
                            <span id="preview-count" class="px-2 py-0.5 bg-gray-100 rounded-full text-xs">0</span>
                        </div>
                        <button id="preview-toggle" class="text-primary hover:text-secondary text-xs flex items-center space-x-1">
                            <span>收起</span>
                            <i class="fa fa-chevron-up"></i>
                        </button>
                    </div>
                    <div id="file-preview-list" class="space-y-2">
                        <!-- 动态添加文件预览 -->
                    </div>
                </div>
                <div class="flex items-center">
                    <button id="upload-btn"
                        class="p-2 rounded-full hover:bg-gray-100 transition-colors text-text-secondary hover:text-primary relative"
                        title="上传附件">
                        <i class="fa fa-plus text-xl"></i>
                    </button>
                    <div class="flex-1 relative ml-2">
                        <input type="text" id="message-input" placeholder="输入消息..." class="input-primary pr-12">
                        <button id="send-btn"
                            class="hidden absolute right-2 top-1/2 transform -translate-y-1/2 text-white bg-primary rounded-full w-8 h-8 flex items-center justify-center hover:bg-secondary transition-colors">
                            <i class="fa fa-paper-plane-o"></i>
                        </button>
                        <input id="file-input" type="file" class="hidden" multiple>
                    </div>
                </div>
            </div>
    </div>

    <script type="module" src="assets/js/main.js"></script>
</body>

</html>
